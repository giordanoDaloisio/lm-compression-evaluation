07/08/2024 12:21:15 - INFO - __main__ -   Namespace(model_type='distilbert', model_name_or_path='distilbert/distilbert-base-uncased', output_dir='model_distilbert/java', load_model_path='model_distilbert/java/checkpoint-best-bleu/pytorch_model.bin', train_filename=None, dev_filename=None, test_filename='../dataset/java/test.jsonl', config_name='', tokenizer_name='', max_source_length=256, max_target_length=128, do_train=False, do_eval=False, do_test=True, do_lower_case=False, no_cuda=False, quantize=False, prune=False, train_batch_size=8, eval_batch_size=64, gradient_accumulation_steps=1, learning_rate=5e-05, beam_size=10, weight_decay=0.0, adam_epsilon=1e-08, max_grad_norm=1.0, num_train_epochs=3, max_steps=-1, eval_steps=-1, train_steps=-1, warmup_steps=0, local_rank=-1, seed=42, job_id='11642', file_len=300)
07/08/2024 12:21:15 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
07/08/2024 12:21:16 - INFO - __main__ -   reload model from model_distilbert/java/checkpoint-best-bleu/pytorch_model.bin
07/08/2024 12:21:20 - INFO - __main__ -   Test file: ../dataset/java/test.jsonl
  0%|          | 0/172 [00:00<?, ?it/s]/NFSHOME/gdaloisio/code/CodeXGLUE/Code-Text/code-to-text/code/model.py:114: UserWarning: The torch.cuda.*DtypeTensor constructors are no longer recommended. It's best to use methods such as torch.tensor(data, dtype=*, device='cuda') to create tensors. (Triggered internally at ../torch/csrc/tensor/python_tensor.cpp:78.)
  self.scores = self.tt.FloatTensor(size).zero_()
  1%|          | 1/172 [00:24<1:09:10, 24.27s/it]  1%|          | 2/172 [00:56<1:21:52, 28.90s/it]  2%|▏         | 3/172 [01:16<1:09:30, 24.68s/it]  2%|▏         | 4/172 [01:47<1:16:15, 27.24s/it]  3%|▎         | 5/172 [02:08<1:09:53, 25.11s/it]  3%|▎         | 6/172 [02:31<1:07:27, 24.38s/it]  4%|▍         | 7/172 [02:51<1:03:15, 23.00s/it]  5%|▍         | 8/172 [03:12<1:00:46, 22.23s/it]  5%|▌         | 9/172 [03:38<1:03:40, 23.44s/it]  6%|▌         | 10/172 [04:16<1:15:35, 27.99s/it]  6%|▋         | 11/172 [04:36<1:08:08, 25.39s/it]  7%|▋         | 12/172 [04:55<1:02:44, 23.53s/it]  8%|▊         | 13/172 [05:20<1:03:58, 24.14s/it]  8%|▊         | 14/172 [05:43<1:02:09, 23.61s/it]  9%|▊         | 15/172 [06:05<1:00:33, 23.15s/it]  9%|▉         | 16/172 [06:25<57:52, 22.26s/it]   10%|▉         | 17/172 [06:49<58:50, 22.78s/it] 10%|█         | 18/172 [07:10<57:17, 22.32s/it] 11%|█         | 19/172 [07:36<59:33, 23.35s/it] 12%|█▏        | 20/172 [07:58<57:47, 22.82s/it] 12%|█▏        | 21/172 [08:18<55:18, 21.98s/it] 13%|█▎        | 22/172 [08:38<53:48, 21.52s/it] 13%|█▎        | 23/172 [08:59<52:52, 21.29s/it] 14%|█▍        | 24/172 [09:21<53:24, 21.65s/it] 15%|█▍        | 25/172 [09:42<52:19, 21.35s/it] 15%|█▌        | 26/172 [10:02<51:16, 21.07s/it] 16%|█▌        | 27/172 [10:23<50:30, 20.90s/it] 16%|█▋        | 28/172 [10:49<53:45, 22.40s/it] 17%|█▋        | 29/172 [11:10<52:42, 22.12s/it] 17%|█▋        | 30/172 [11:39<56:51, 24.02s/it] 18%|█▊        | 31/172 [12:02<56:07, 23.88s/it] 19%|█▊        | 32/172 [12:31<58:49, 25.21s/it] 19%|█▉        | 33/172 [12:53<56:28, 24.38s/it] 20%|█▉        | 34/172 [13:21<58:39, 25.50s/it] 20%|██        | 35/172 [13:53<1:02:34, 27.40s/it] 21%|██        | 36/172 [14:19<1:00:50, 26.84s/it] 22%|██▏       | 37/172 [14:40<56:37, 25.17s/it]   22%|██▏       | 38/172 [15:05<56:22, 25.24s/it] 23%|██▎       | 39/172 [15:51<1:09:18, 31.26s/it] 23%|██▎       | 40/172 [16:16<1:05:12, 29.64s/it] 24%|██▍       | 41/172 [16:38<59:19, 27.17s/it]   24%|██▍       | 42/172 [16:58<54:37, 25.21s/it] 25%|██▌       | 43/172 [17:24<54:37, 25.41s/it] 26%|██▌       | 44/172 [17:43<50:14, 23.55s/it] 26%|██▌       | 45/172 [18:09<51:08, 24.16s/it] 27%|██▋       | 46/172 [18:31<49:35, 23.61s/it] 27%|██▋       | 47/172 [18:54<48:33, 23.31s/it] 28%|██▊       | 48/172 [19:14<46:22, 22.44s/it] 28%|██▊       | 49/172 [19:40<47:59, 23.41s/it] 29%|██▉       | 50/172 [20:01<46:01, 22.63s/it] 30%|██▉       | 51/172 [20:26<46:54, 23.26s/it] 30%|███       | 52/172 [20:46<45:05, 22.54s/it] 31%|███       | 53/172 [21:15<48:27, 24.43s/it] 31%|███▏      | 54/172 [21:37<46:19, 23.55s/it] 32%|███▏      | 55/172 [21:58<44:43, 22.94s/it] 33%|███▎      | 56/172 [22:24<46:00, 23.80s/it] 33%|███▎      | 57/172 [22:59<51:53, 27.07s/it] 34%|███▎      | 58/172 [23:27<52:05, 27.41s/it] 34%|███▍      | 59/172 [23:49<48:37, 25.82s/it] 35%|███▍      | 60/172 [24:22<52:09, 27.94s/it] 35%|███▌      | 61/172 [24:51<52:31, 28.39s/it] 36%|███▌      | 62/172 [25:11<47:24, 25.86s/it] 37%|███▋      | 63/172 [25:51<54:13, 29.85s/it] 37%|███▋      | 64/172 [26:12<49:10, 27.32s/it] 38%|███▊      | 65/172 [26:33<45:27, 25.49s/it] 38%|███▊      | 66/172 [26:55<43:05, 24.39s/it] 39%|███▉      | 67/172 [27:34<50:10, 28.67s/it] 40%|███▉      | 68/172 [28:18<57:52, 33.39s/it] 40%|████      | 69/172 [28:50<56:25, 32.87s/it] 41%|████      | 70/172 [29:24<56:24, 33.18s/it] 41%|████▏     | 71/172 [29:49<51:53, 30.83s/it] 42%|████▏     | 72/172 [30:11<46:52, 28.13s/it] 42%|████▏     | 73/172 [30:32<42:45, 25.91s/it] 43%|████▎     | 74/172 [30:56<41:27, 25.38s/it] 44%|████▎     | 75/172 [31:34<47:22, 29.30s/it] 44%|████▍     | 76/172 [32:06<47:58, 29.98s/it] 45%|████▍     | 77/172 [32:33<45:58, 29.04s/it] 45%|████▌     | 78/172 [32:54<41:59, 26.80s/it] 46%|████▌     | 79/172 [33:13<37:58, 24.50s/it] 47%|████▋     | 80/172 [33:40<38:33, 25.14s/it] 47%|████▋     | 81/172 [34:18<43:56, 28.97s/it] 48%|████▊     | 82/172 [34:39<39:43, 26.49s/it] 48%|████▊     | 83/172 [34:58<36:01, 24.29s/it] 49%|████▉     | 84/172 [35:30<39:07, 26.68s/it] 49%|████▉     | 85/172 [35:58<39:26, 27.20s/it] 50%|█████     | 86/172 [36:31<41:20, 28.84s/it] 51%|█████     | 87/172 [37:05<42:51, 30.25s/it] 51%|█████     | 88/172 [37:51<48:58, 34.98s/it] 52%|█████▏    | 89/172 [38:18<45:04, 32.59s/it] 52%|█████▏    | 90/172 [38:44<42:05, 30.79s/it] 53%|█████▎    | 91/172 [39:10<39:39, 29.37s/it] 53%|█████▎    | 92/172 [39:37<37:59, 28.50s/it] 54%|█████▍    | 93/172 [39:57<34:22, 26.11s/it] 55%|█████▍    | 94/172 [40:30<36:37, 28.17s/it] 55%|█████▌    | 95/172 [41:13<41:54, 32.66s/it] 56%|█████▌    | 96/172 [41:38<38:17, 30.24s/it] 56%|█████▋    | 97/172 [42:01<34:58, 27.98s/it] 57%|█████▋    | 98/172 [42:22<32:01, 25.97s/it] 58%|█████▊    | 99/172 [42:44<30:09, 24.79s/it] 58%|█████▊    | 100/172 [43:04<28:03, 23.38s/it] 59%|█████▊    | 101/172 [43:34<30:03, 25.40s/it] 59%|█████▉    | 102/172 [44:02<30:31, 26.17s/it] 60%|█████▉    | 103/172 [44:21<27:43, 24.11s/it] 60%|██████    | 104/172 [44:42<26:11, 23.11s/it] 61%|██████    | 105/172 [45:03<25:02, 22.43s/it] 62%|██████▏   | 106/172 [45:23<23:48, 21.64s/it] 62%|██████▏   | 107/172 [45:44<23:17, 21.49s/it] 63%|██████▎   | 108/172 [46:11<24:37, 23.09s/it] 63%|██████▎   | 109/172 [46:33<24:01, 22.87s/it] 64%|██████▍   | 110/172 [47:00<24:48, 24.01s/it] 65%|██████▍   | 111/172 [47:31<26:25, 26.00s/it] 65%|██████▌   | 112/172 [47:55<25:31, 25.53s/it] 66%|██████▌   | 113/172 [48:21<25:07, 25.54s/it] 66%|██████▋   | 114/172 [48:44<23:56, 24.77s/it] 67%|██████▋   | 115/172 [49:09<23:50, 25.09s/it] 67%|██████▋   | 116/172 [49:33<23:05, 24.73s/it] 68%|██████▊   | 117/172 [49:59<22:49, 24.90s/it] 69%|██████▊   | 118/172 [50:26<23:02, 25.60s/it] 69%|██████▉   | 119/172 [50:47<21:34, 24.43s/it] 70%|██████▉   | 120/172 [51:13<21:27, 24.77s/it] 70%|███████   | 121/172 [51:33<19:53, 23.41s/it] 71%|███████   | 122/172 [51:54<18:50, 22.60s/it] 72%|███████▏  | 123/172 [52:14<17:49, 21.82s/it] 72%|███████▏  | 124/172 [52:40<18:25, 23.03s/it] 73%|███████▎  | 125/172 [53:01<17:36, 22.48s/it] 73%|███████▎  | 126/172 [53:22<16:47, 21.91s/it] 74%|███████▍  | 127/172 [53:46<16:54, 22.55s/it] 74%|███████▍  | 128/172 [54:10<16:55, 23.08s/it] 75%|███████▌  | 129/172 [54:27<15:08, 21.12s/it] 76%|███████▌  | 130/172 [54:50<15:12, 21.74s/it] 76%|███████▌  | 131/172 [55:10<14:34, 21.33s/it] 77%|███████▋  | 132/172 [55:35<15:01, 22.54s/it] 77%|███████▋  | 133/172 [55:54<13:57, 21.48s/it] 78%|███████▊  | 134/172 [56:24<15:08, 23.91s/it] 78%|███████▊  | 135/172 [56:43<13:52, 22.49s/it] 79%|███████▉  | 136/172 [57:01<12:44, 21.23s/it] 80%|███████▉  | 137/172 [57:28<13:19, 22.85s/it] 80%|████████  | 138/172 [57:47<12:12, 21.55s/it] 81%|████████  | 139/172 [58:12<12:26, 22.63s/it] 81%|████████▏ | 140/172 [58:32<11:43, 21.98s/it] 82%|████████▏ | 141/172 [59:16<14:43, 28.50s/it] 83%|████████▎ | 142/172 [59:42<13:51, 27.72s/it] 83%|████████▎ | 143/172 [1:00:17<14:28, 29.94s/it] 84%|████████▎ | 144/172 [1:00:35<12:15, 26.25s/it] 84%|████████▍ | 145/172 [1:01:05<12:22, 27.48s/it] 85%|████████▍ | 146/172 [1:01:27<11:09, 25.76s/it] 85%|████████▌ | 147/172 [1:01:46<09:57, 23.89s/it] 86%|████████▌ | 148/172 [1:02:14<09:57, 24.91s/it] 87%|████████▋ | 149/172 [1:02:40<09:41, 25.27s/it] 87%|████████▋ | 150/172 [1:02:59<08:37, 23.51s/it] 88%|████████▊ | 151/172 [1:03:20<07:55, 22.66s/it] 88%|████████▊ | 152/172 [1:03:56<08:56, 26.83s/it] 89%|████████▉ | 153/172 [1:04:16<07:46, 24.56s/it] 90%|████████▉ | 154/172 [1:04:36<07:01, 23.42s/it] 90%|█████████ | 155/172 [1:05:06<07:09, 25.25s/it] 91%|█████████ | 156/172 [1:05:34<06:56, 26.04s/it] 91%|█████████▏| 157/172 [1:06:02<06:40, 26.73s/it] 92%|█████████▏| 158/172 [1:06:23<05:51, 25.09s/it] 92%|█████████▏| 159/172 [1:06:47<05:19, 24.58s/it] 93%|█████████▎| 160/172 [1:07:09<04:44, 23.75s/it] 94%|█████████▎| 161/172 [1:07:32<04:20, 23.67s/it] 94%|█████████▍| 162/172 [1:07:55<03:54, 23.47s/it] 95%|█████████▍| 163/172 [1:08:19<03:32, 23.58s/it] 95%|█████████▌| 164/172 [1:08:43<03:09, 23.68s/it] 96%|█████████▌| 165/172 [1:09:13<02:59, 25.58s/it] 97%|█████████▋| 166/172 [1:09:48<02:50, 28.35s/it] 97%|█████████▋| 167/172 [1:10:08<02:09, 25.90s/it] 98%|█████████▊| 168/172 [1:10:35<01:45, 26.34s/it] 98%|█████████▊| 169/172 [1:10:57<01:14, 24.88s/it] 99%|█████████▉| 170/172 [1:11:21<00:49, 24.75s/it] 99%|█████████▉| 171/172 [1:11:48<00:25, 25.28s/it]100%|██████████| 172/172 [1:11:51<00:00, 18.64s/it]100%|██████████| 172/172 [1:11:51<00:00, 25.07s/it]
Total: 10955
07/08/2024 13:33:30 - INFO - __main__ -     bleu-4 = 10.84 
07/08/2024 13:33:30 - INFO - __main__ -     ********************
07/08/2024 13:33:30 - INFO - __main__ -   Average inference time: 25.04420819947886
