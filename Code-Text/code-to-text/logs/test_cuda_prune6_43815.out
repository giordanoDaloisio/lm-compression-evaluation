07/23/2024 18:50:49 - INFO - __main__ -   Namespace(model_type='roberta', model_name_or_path='microsoft/codebert-base', output_dir='model/java', load_model_path='model/java/checkpoint-best-bleu/pytorch_model.bin', train_filename=None, dev_filename=None, test_filename='../dataset/java/test.jsonl', config_name='', tokenizer_name='', max_source_length=256, max_target_length=128, do_train=False, do_eval=False, do_test=True, do_lower_case=False, no_cuda=False, quantize=False, quantize4=False, quantizef8=False, prune=False, prune4=False, prune6=True, do_retrain=False, train_batch_size=8, eval_batch_size=64, gradient_accumulation_steps=1, learning_rate=5e-05, beam_size=10, weight_decay=0.0, adam_epsilon=1e-08, max_grad_norm=1.0, num_train_epochs=3, max_steps=-1, eval_steps=-1, train_steps=-1, warmup_steps=0, local_rank=-1, seed=42, job_id='43815', file_len=300)
07/23/2024 18:50:49 - WARNING - __main__ -   Process rank: -1, device: cuda, n_gpu: 1, distributed training: False
07/23/2024 18:50:55 - INFO - __main__ -   reload model from model/java/checkpoint-best-bleu/pytorch_model.bin
07/23/2024 18:51:00 - INFO - __main__ -   Apply model pruning 0.6
07/23/2024 18:51:04 - INFO - __main__ -   Size (MB): 706.91481
07/23/2024 18:51:04 - INFO - __main__ -   Test file: ../dataset/java/test.jsonl
  0%|          | 0/172 [00:00<?, ?it/s]/NFSHOME/gdaloisio/code/CodeXGLUE/Code-Text/code-to-text/code/model.py:114: UserWarning: The torch.cuda.*DtypeTensor constructors are no longer recommended. It's best to use methods such as torch.tensor(data, dtype=*, device='cuda') to create tensors. (Triggered internally at ../torch/csrc/tensor/python_tensor.cpp:78.)
  self.scores = self.tt.FloatTensor(size).zero_()
  1%|          | 1/172 [01:03<3:00:04, 63.18s/it]  1%|          | 2/172 [03:49<5:51:37, 124.10s/it]  2%|▏         | 3/172 [06:32<6:38:49, 141.60s/it]  2%|▏         | 4/172 [08:03<5:40:36, 121.65s/it]  3%|▎         | 5/172 [11:58<7:32:54, 162.72s/it]  3%|▎         | 6/172 [15:01<7:48:29, 169.34s/it]  4%|▍         | 7/172 [16:26<6:30:24, 141.97s/it]  5%|▍         | 8/172 [18:48<6:27:27, 141.75s/it]  5%|▌         | 9/172 [20:46<6:05:31, 134.55s/it]  6%|▌         | 10/172 [21:56<5:09:05, 114.48s/it]  6%|▋         | 11/172 [23:45<5:02:29, 112.73s/it]  7%|▋         | 12/172 [25:30<4:54:30, 110.44s/it]  8%|▊         | 13/172 [27:44<5:11:30, 117.55s/it]  8%|▊         | 14/172 [30:05<5:28:14, 124.65s/it]  9%|▊         | 15/172 [31:10<4:39:09, 106.69s/it]  9%|▉         | 16/172 [33:40<5:11:31, 119.82s/it] 10%|▉         | 17/172 [36:30<5:48:39, 134.96s/it] 10%|█         | 18/172 [39:08<6:03:37, 141.68s/it] 11%|█         | 19/172 [42:19<6:39:26, 156.64s/it] 12%|█▏        | 20/172 [43:35<5:35:42, 132.51s/it] 12%|█▏        | 21/172 [45:28<5:18:28, 126.55s/it] 13%|█▎        | 22/172 [47:47<5:25:43, 130.29s/it] 13%|█▎        | 23/172 [50:23<5:42:27, 137.90s/it] 14%|█▍        | 24/172 [53:02<5:56:02, 144.34s/it] 15%|█▍        | 25/172 [55:24<5:52:00, 143.68s/it] 15%|█▌        | 26/172 [57:13<5:23:57, 133.14s/it] 16%|█▌        | 27/172 [59:02<5:04:29, 125.99s/it] 16%|█▋        | 28/172 [1:01:11<5:04:36, 126.92s/it] 17%|█▋        | 29/172 [1:04:34<5:56:34, 149.61s/it] 17%|█▋        | 30/172 [1:05:35<4:51:34, 123.20s/it] 18%|█▊        | 31/172 [1:07:50<4:57:31, 126.61s/it] 19%|█▊        | 32/172 [1:11:05<5:43:40, 147.29s/it] 19%|█▉        | 33/172 [1:13:44<5:49:14, 150.75s/it] 20%|█▉        | 34/172 [1:15:56<5:33:28, 144.99s/it] 20%|██        | 35/172 [1:18:23<5:32:55, 145.81s/it] 21%|██        | 36/172 [1:21:34<6:01:11, 159.35s/it] 22%|██▏       | 37/172 [1:24:23<6:05:01, 162.23s/it] 22%|██▏       | 38/172 [1:26:56<5:55:34, 159.21s/it] 23%|██▎       | 39/172 [1:29:35<5:52:48, 159.16s/it] 23%|██▎       | 40/172 [1:30:58<5:00:25, 136.56s/it] 24%|██▍       | 41/172 [1:33:12<4:56:14, 135.68s/it] 24%|██▍       | 42/172 [1:34:03<3:59:05, 110.35s/it] 25%|██▌       | 43/172 [1:36:35<4:23:54, 122.75s/it] 26%|██▌       | 44/172 [1:38:05<4:00:47, 112.87s/it] 26%|██▌       | 45/172 [1:39:59<3:59:48, 113.30s/it] 27%|██▋       | 46/172 [1:42:33<4:23:43, 125.59s/it] 27%|██▋       | 47/172 [1:45:19<4:46:39, 137.59s/it] 28%|██▊       | 48/172 [1:47:28<4:39:15, 135.13s/it] 28%|██▊       | 49/172 [1:49:54<4:43:45, 138.42s/it] 29%|██▉       | 50/172 [1:52:29<4:51:32, 143.38s/it] 30%|██▉       | 51/172 [1:54:22<4:30:24, 134.09s/it] 30%|███       | 52/172 [1:56:50<4:36:37, 138.31s/it] 31%|███       | 53/172 [2:00:30<5:22:54, 162.81s/it] 31%|███▏      | 54/172 [2:04:10<5:54:04, 180.04s/it] 32%|███▏      | 55/172 [2:05:37<4:56:38, 152.12s/it] 33%|███▎      | 56/172 [2:06:36<3:59:57, 124.12s/it] 33%|███▎      | 57/172 [2:09:43<4:34:14, 143.08s/it] 34%|███▎      | 58/172 [2:11:43<4:18:46, 136.20s/it] 34%|███▍      | 59/172 [2:13:14<3:50:41, 122.49s/it] 35%|███▍      | 60/172 [2:15:20<3:50:41, 123.58s/it] 35%|███▌      | 61/172 [2:17:20<3:46:28, 122.42s/it] 36%|███▌      | 62/172 [2:20:14<4:12:54, 137.95s/it] 37%|███▋      | 63/172 [2:22:23<4:05:43, 135.27s/it] 37%|███▋      | 64/172 [2:24:57<4:13:44, 140.97s/it] 38%|███▊      | 65/172 [2:26:31<3:45:58, 126.72s/it] 38%|███▊      | 66/172 [2:28:48<3:49:29, 129.90s/it] 39%|███▉      | 67/172 [2:30:30<3:32:38, 121.51s/it] 40%|███▉      | 68/172 [2:33:32<4:02:18, 139.79s/it] 40%|████      | 69/172 [2:35:18<3:42:26, 129.58s/it] 41%|████      | 70/172 [2:37:20<3:36:14, 127.20s/it] 41%|████▏     | 71/172 [2:39:02<3:21:23, 119.64s/it] 42%|████▏     | 72/172 [2:40:34<3:05:50, 111.51s/it] 42%|████▏     | 73/172 [2:42:04<2:53:22, 105.08s/it] 43%|████▎     | 74/172 [2:44:32<3:12:15, 117.71s/it] 44%|████▎     | 75/172 [2:46:11<3:01:17, 112.14s/it] 44%|████▍     | 76/172 [2:48:29<3:11:56, 119.97s/it] 45%|████▍     | 77/172 [2:50:50<3:19:48, 126.19s/it] 45%|████▌     | 78/172 [2:52:22<3:01:42, 115.99s/it] 46%|████▌     | 79/172 [2:54:13<2:57:24, 114.45s/it] 47%|████▋     | 80/172 [2:56:58<3:18:39, 129.56s/it] 47%|████▋     | 81/172 [2:58:43<3:05:25, 122.26s/it] 48%|████▊     | 82/172 [3:00:45<3:03:24, 122.27s/it] 48%|████▊     | 83/172 [3:02:40<2:58:00, 120.01s/it] 49%|████▉     | 84/172 [3:04:56<3:03:07, 124.85s/it] 49%|████▉     | 85/172 [3:07:05<3:02:42, 126.00s/it] 50%|█████     | 86/172 [3:08:44<2:49:17, 118.11s/it] 51%|█████     | 87/172 [3:11:13<3:00:27, 127.38s/it] 51%|█████     | 88/172 [3:12:41<2:41:34, 115.41s/it] 52%|█████▏    | 89/172 [3:14:05<2:26:43, 106.06s/it] 52%|█████▏    | 90/172 [3:16:00<2:28:42, 108.81s/it] 53%|█████▎    | 91/172 [3:17:43<2:24:30, 107.04s/it] 53%|█████▎    | 92/172 [3:19:33<2:23:39, 107.74s/it] 54%|█████▍    | 93/172 [3:24:03<3:26:15, 156.65s/it] 55%|█████▍    | 94/172 [3:28:29<4:06:04, 189.29s/it] 55%|█████▌    | 95/172 [3:33:20<4:42:19, 219.99s/it] 56%|█████▌    | 96/172 [3:36:47<4:33:26, 215.88s/it] 56%|█████▋    | 97/172 [3:39:12<4:03:23, 194.72s/it] 57%|█████▋    | 98/172 [3:41:22<3:36:13, 175.32s/it] 58%|█████▊    | 99/172 [3:43:33<3:16:57, 161.89s/it] 58%|█████▊    | 100/172 [3:45:48<3:04:51, 154.05s/it] 59%|█████▊    | 101/172 [3:47:44<2:48:32, 142.43s/it] 59%|█████▉    | 102/172 [3:49:10<2:26:38, 125.69s/it] 60%|█████▉    | 103/172 [3:51:21<2:26:22, 127.28s/it] 60%|██████    | 104/172 [3:53:05<2:16:10, 120.15s/it] 61%|██████    | 105/172 [3:55:24<2:20:30, 125.82s/it] 62%|██████▏   | 106/172 [3:57:25<2:16:41, 124.26s/it] 62%|██████▏   | 107/172 [3:59:59<2:24:18, 133.20s/it] 63%|██████▎   | 108/172 [4:02:16<2:23:16, 134.33s/it] 63%|██████▎   | 109/172 [4:03:52<2:09:14, 123.09s/it] 64%|██████▍   | 110/172 [4:04:48<1:46:19, 102.89s/it] 65%|██████▍   | 111/172 [4:06:54<1:51:32, 109.72s/it] 65%|██████▌   | 112/172 [4:08:25<1:44:01, 104.03s/it] 66%|██████▌   | 113/172 [4:10:35<1:50:01, 111.90s/it] 66%|██████▋   | 114/172 [4:12:48<1:54:24, 118.36s/it] 67%|██████▋   | 115/172 [4:14:43<1:51:24, 117.28s/it] 67%|██████▋   | 116/172 [4:16:30<1:46:34, 114.19s/it] 68%|██████▊   | 117/172 [4:17:32<1:30:17, 98.50s/it]  69%|██████▊   | 118/172 [4:19:49<1:39:01, 110.03s/it] 69%|██████▉   | 119/172 [4:22:24<1:49:05, 123.49s/it] 70%|██████▉   | 120/172 [4:24:18<1:44:38, 120.74s/it] 70%|███████   | 121/172 [4:26:02<1:38:13, 115.56s/it] 71%|███████   | 122/172 [4:27:48<1:33:58, 112.77s/it] 72%|███████▏  | 123/172 [4:29:40<1:31:54, 112.54s/it] 72%|███████▏  | 124/172 [4:31:58<1:36:14, 120.30s/it] 73%|███████▎  | 125/172 [4:33:56<1:33:36, 119.50s/it] 73%|███████▎  | 126/172 [4:36:32<1:40:02, 130.49s/it] 74%|███████▍  | 127/172 [4:38:22<1:33:11, 124.25s/it] 74%|███████▍  | 128/172 [4:40:36<1:33:14, 127.15s/it] 75%|███████▌  | 129/172 [4:43:12<1:37:21, 135.84s/it] 76%|███████▌  | 130/172 [4:45:42<1:38:13, 140.32s/it] 76%|███████▌  | 131/172 [4:47:53<1:33:56, 137.47s/it] 77%|███████▋  | 132/172 [4:49:54<1:28:16, 132.41s/it] 77%|███████▋  | 133/172 [4:52:42<1:33:03, 143.16s/it] 78%|███████▊  | 134/172 [4:56:15<1:43:51, 163.99s/it] 78%|███████▊  | 135/172 [5:00:37<1:59:14, 193.36s/it] 79%|███████▉  | 136/172 [5:05:02<2:09:01, 215.05s/it] 80%|███████▉  | 137/172 [5:09:30<2:14:42, 230.93s/it] 80%|████████  | 138/172 [5:12:28<2:01:53, 215.11s/it] 81%|████████  | 139/172 [5:13:41<1:34:51, 172.48s/it] 81%|████████▏ | 140/172 [5:15:25<1:21:01, 151.92s/it] 82%|████████▏ | 141/172 [5:17:54<1:17:57, 150.89s/it] 83%|████████▎ | 142/172 [5:20:30<1:16:12, 152.42s/it] 83%|████████▎ | 143/172 [5:24:07<1:23:01, 171.78s/it] 84%|████████▎ | 144/172 [5:25:36<1:08:37, 147.06s/it] 84%|████████▍ | 145/172 [5:27:34<1:02:17, 138.43s/it] 85%|████████▍ | 146/172 [5:28:48<51:29, 118.83s/it]   85%|████████▌ | 147/172 [5:30:33<47:49, 114.78s/it] 86%|████████▌ | 148/172 [5:32:02<42:46, 106.95s/it] 87%|████████▋ | 149/172 [5:33:50<41:09, 107.38s/it] 87%|████████▋ | 150/172 [5:34:44<33:29, 91.36s/it]  88%|████████▊ | 151/172 [5:36:39<34:25, 98.34s/it] 88%|████████▊ | 152/172 [5:38:22<33:18, 99.94s/it] 89%|████████▉ | 153/172 [5:40:27<34:01, 107.42s/it] 90%|████████▉ | 154/172 [5:42:31<33:39, 112.22s/it] 90%|█████████ | 155/172 [5:44:12<30:50, 108.87s/it] 91%|█████████ | 156/172 [5:45:23<26:01, 97.60s/it]  91%|█████████▏| 157/172 [5:47:16<25:34, 102.31s/it] 92%|█████████▏| 158/172 [5:48:26<21:33, 92.42s/it]  92%|█████████▏| 159/172 [5:51:22<25:30, 117.76s/it] 93%|█████████▎| 160/172 [5:54:44<28:33, 142.80s/it] 94%|█████████▎| 161/172 [5:58:28<30:39, 167.22s/it] 94%|█████████▍| 162/172 [6:02:02<30:12, 181.30s/it] 95%|█████████▍| 163/172 [6:05:07<27:23, 182.56s/it] 95%|█████████▌| 164/172 [6:08:21<24:47, 185.98s/it] 96%|█████████▌| 165/172 [6:10:28<19:37, 168.22s/it] 97%|█████████▋| 166/172 [6:12:40<15:44, 157.39s/it] 97%|█████████▋| 167/172 [6:14:50<12:25, 149.03s/it] 98%|█████████▊| 168/172 [6:16:53<09:24, 141.15s/it] 98%|█████████▊| 169/172 [6:18:18<06:13, 124.45s/it] 99%|█████████▉| 170/172 [6:20:18<04:06, 123.18s/it] 99%|█████████▉| 171/172 [6:22:08<01:59, 119.03s/it]100%|██████████| 172/172 [6:22:48<00:00, 95.38s/it] 100%|██████████| 172/172 [6:22:48<00:00, 133.54s/it]
Total: 10955
07/24/2024 01:14:06 - INFO - __main__ -     bleu-4 = 1.25 
07/24/2024 01:14:06 - INFO - __main__ -     ********************
07/24/2024 01:14:06 - INFO - __main__ -   Average inference time: 133.50804165768068
